# ✨ מסמך תכונות ויכולות - מכ"ם גשם

## תוכן עניינים
1. [תצוגת מפה ומכ"ם](#תצוגת-מפה-ומכם)
2. [חיפוש ונווט](#חיפוש-ונווט)
3. [אנימציה ובקרה](#אנימציה-ובקרה)
4. [התאמה אישית](#התאמה-אישית)
5. [מידע מטאורולוגי](#מידע-מטאורולוגי)
6. [נגישות ותמיכה במכשירים](#נגישות-ותמיכה-במכשירים)

---

## 🗺️ תצוגת מפה ומכ"ם

### מצבי תצוגה

#### 1. מכ"ם גשם (Radar Mode)
**תיאור:** הצגת נתוני מכ"ם מטאורולוגי בזמן אמת

**מאפיינים:**
- ✅ כיסוי גלובלי של נתוני מכ"ם
- ✅ רזולוציה של 256x256 פיקסלים לכל tile
- ✅ עדכון כל 10 דקות
- ✅ 12 פריימים היסטוריים
- ✅ 6 פריימי תחזית (nowcast)

**סולם עוצמה:**
```
🔵 כחול בהיר    → משקעים קלים (0.1-0.5 mm/h)
🟢 ירוק          → משקעים בינוניים (0.5-2 mm/h)
🟡 צהוב          → משקעים כבדים (2-5 mm/h)
🟠 כתום          → משקעים עזים מאוד (5-10 mm/h)
🔴 אדום          → משקעים קיצוניים (10+ mm/h)
🟣 סגול          → גשם עז במיוחד (50+ mm/h)
```

#### 2. תצוגת לוויין (Satellite Mode)
**תיאור:** תמונות אינפרא-אדום מלוויין מטאורולוגי

**מאפיינים:**
- ✅ תמונות מלוויין גיאו-סטציונרי
- ✅ ערוץ אינפרא-אדום (10.4 μm)
- ✅ זיהוי כיסוי עננים
- ✅ טמפרטורת ראשי עננים
- ✅ עדכון כל 15-30 דקות

**שימושים:**
- 🌩️ זיהוי מערכות ענן גדולות
- ⛈️ מעקב אחר סופות
- 🌀 התפתחות מערכות מזג אוויר
- 🌡️ טמפרטורת עננים

---

### סגנונות מפת בסיס

#### 🌑 מפה כהה (Dark Mode)
- מותאם לשימוש לילה
- ניגודיות גבוהה
- חוסך צריכת חשמל במכשירים עם OLED

#### 🛰️ מפת לוויין (Satellite View)
- תמונות לוויין אמיתיות
- פרטים טופוגרפיים
- הקשר גיאוגרפי ברור

#### 🗻 מפה טופוגרפית (Terrain View)
- ציון גבהים ושיפועים
- כבישים ודרכים
- יישובים וערים

---

## 🔍 חיפוש ונווט

### חיפוש ערים ומיקומים

**תכונות:**
- 🔎 חיפוש בעברית ובאנגלית
- 🇮🇱 התמקדות בישראל (קוד מדינה: IL)
- 📍 5 תוצאות מקסימום
- ⚡ תגובה מיידית
- 🗺️ קפיצה אוטומטית למיקום

**דוגמאות חיפוש:**
```
"תל אביב"      → תל אביב-יפו, ישראל
"ירושלים"       → ירושלים, ישראל
"Haifa"         → חיפה, ישראל
"באר שבע"       → באר שבע, ישראל
```

**רשומת תוצאות:**
- שם מלא של המיקום
- קואורדינטות (lat, lon)
- סוג המיקום (עיר, יישוב, רחוב)

---

### מיקום אוטומטי (GPS)

**תכונות:**
- 📱 שימוש ב-Geolocation API
- 🎯 דיוק גבוה (enableHighAccuracy)
- ⏱️ Timeout של 5 שניות
- 🔒 דורש הרשאת משתמש

**זרימת עבודה:**
```
לחיצה על כפתור "מיקום שלי"
        │
        ▼
  בקשת הרשאה מהמשתמש
        │
   ┌────┴────┐
   │         │
  ✅        ❌
מאושר    נדחה
   │         │
   ▼         ▼
 קבלת     הודעת
 GPS      שגיאה
   │
   ▼
מעבר למיקום
   │
   ▼
הצגת מזג אוויר מקומי
```

---

### ניווט במפה

**אינטראקציות:**
- 🖱️ **גרירה** - הזזת מפה
- 🔍 **זום** - גלגלת עכבר / pinch-to-zoom
- 👆 **לחיצה** - בחירת נקודה והצגת מזג אוויר
- 🏠 **חזרה לישראל** - איפוס למיקום ברירת מחדל

**מרכז ברירת מחדל:**
```typescript
Israel Center: [31.5, 34.9]
Zoom Level: 7
```

---

## 🎬 אנימציה ובקרה

### נגן אנימציה

**בקרות:**
- ▶️ **Play** - הפעלת אנימציה
- ⏸️ **Pause** - השהיית אנימציה
- 🔄 **Refresh** - רענון נתונים

**תכונות:**
- 🔁 לולאה רציפה (Loop)
- 📊 Timeline עם אינדיקטור התקדמות
- ⏰ הצגת זמן פריים נוכחי
- 🟢 אינדיקטור "זמן אמת" / "תחזית"

---

### מהירויות הפעלה

| מהירות | זמן בין פריימים | שימוש מומלץ |
|--------|------------------|--------------|
| **איטי** | 1200ms | צפייה מדוקדקת, ניתוח |
| **רגיל** | 800ms | שימוש יומיומי |
| **מהיר** | 400ms | סקירה מהירה |

---

### Timeline ומעבר ידני

**תכונות:**
- 🎚️ סליידר לניווט בין פריימים
- 📍 לחיצה על סליידר עוצרת אנימציה
- 📊 אחוז התקדמות ויזואלי (כחול)
- 🔢 אינדיקס פריים: 0 עד N-1

---

## ⚙️ התאמה אישית

### סכמות צבע מכ"ם

**6 סכמות זמינות:**

1. **כחול אוניברסלי** (ID: 2)
   - נקי ומודרני
   - ניגודיות מעולה
   - ברירת מחדל

2. **קלאסי RainViewer** (ID: 1)
   - סגנון מקורי
   - מוכר למשתמשים ותיקים

3. **ערוץ מזג האוויר** (ID: 4)
   - דומה לטלוויזיה
   - מוכר לציבור רחב

4. **NEXRAD (ארה"ב)** (ID: 6)
   - תקן אמריקאי
   - פופולרי בקרב מטאורולוגים

5. **קשת בענן** (ID: 7)
   - צבעוני וחווייתי
   - טווח רחב של גוונים

6. **Dark Sky** (ID: 8)
   - עיצוב מינימליסטי
   - מתאים למפה כהה

**החלפה:**
```
לחיצה על כפתור "סגנון מכ"ם" → בחירת סכמה → עדכון מיידי
```

---

### שקיפות שכבה

**טווח:** 0.1 - 1.0  
**ברירת מחדל:** 0.8 (80%)

**שימושים:**
- 🗺️ הצגת פרטי מפת בסיס
- 🏙️ זיהוי שמות ערים מתחת לשכבה
- 👁️ התאמה לראות אישית

**שליטה:**
- סליידר בתחתית המסך
- שינוי ריאל-טיים
- שמירה לאורך הסשן

---

## 🌦️ מידע מטאורולוגי

### פאנל מזג אוויר מקומי

**הצגה עם:**
- לחיצה על המפה
- בחירת עיר מחיפוש
- שימוש במיקום GPS

**מידע מוצג:**

#### 🌡️ טמפרטורה
- ערך בצלזיוס (°C)
- דיוק של 0.1 מעלות
- מקור: Open-Meteo API

#### 🌤️ תנאי מזג אוויר
**תיאורים בעברית:**
- ☀️ בהיר
- ⛅ מעונן חלקית
- 🌫️ ערפילי
- 🌧️ גשום
- ❄️ שלג
- ⛈️ סופות רעמים
- 🌦️ משתנה

#### 💨 רוח
- מהירות ב-km/h
- מקור: תחנת מטאורולוגיה קרובה

#### 🌧️ משקעים
- כמות ב-mm
- ממוצע שעתי
- נתונים בזמן אמת

---

### שעון זמן אמת

**מיקום:** פאנל צד ימין  
**פורמט:** HH:MM:SS  
**לוקאל:** עברית (IL)  
**עדכון:** כל שנייה

**שימוש:**
- סנכרון עם נתוני מכ"ם
- ייחוס זמנים
- אינדיקטור "חי"

---

### אינדיקטור זמן פריים

**מיקום:** כותרת עליונה  
**פורמט:** HH:MM  
**צבעים:**
- 🟢 ירוק - נתונים היסטוריים (עבר)
- 🟡 כתום - תחזית (nowcast)

**שימוש:**
- זיהוי "מתי" הפריים הנוכחי
- הבנת הקשר זמן

---

## 📱 נגישות ותמיכה במכשירים

### תמיכה במובייל

#### Safe Area Insets
**תמיכה מלאה ב:**
- iPhone notch (חריץ מסך)
- Home Indicator (מחוון בית)
- Edge screens (מסכים מעוגלים)

**יישום CSS:**
```css
padding-top: calc(1rem + env(safe-area-inset-top));
padding-bottom: env(safe-area-inset-bottom);
padding-right: env(safe-area-inset-right);
padding-left: env(safe-area-inset-left);
```

---

### Responsive Design

**Breakpoints:**
- 📱 **Mobile**: < 640px
- 🖥️ **Desktop**: ≥ 640px

**התאמות:**
- גודל פונטים
- מיקום פאנלים
- גודל כפתורים (44x44px מינימום)
- מרווחים

---

### תמיכה בעברית (RTL)

**מאפיינים:**
- `dir="rtl"` על אלמנטים רלוונטיים
- סידור כפתורים מימין לשמאל
- יישור טקסט לימין
- מקרא ופאנלים מותאמים

---

### נגישות (Accessibility)

**תכונות:**
- ✅ ניגודיות צבעים (WCAG AA)
- ✅ גודל יעד מינימלי לכפתורים
- ✅ Tooltips על כפתורים
- ✅ Keyboard navigation (חלקי)
- ✅ Aria labels (יש לשפר)

**שיפורים עתידיים:**
- Screen reader support
- Focus indicators
- Skip links
- ARIA live regions

---

## 🎨 חוויית משתמש (UX)

### עיצוב ויזואלי

**סגנון:**
- 🎨 **Glassmorphism** - אפקט זכוכית מטושטשת
- 🌈 **Gradient accents** - הדגשות בגרדיאנט
- 💫 **Smooth animations** - אנימציות חלקות
- 🎯 **Minimalist UI** - ממשק מינימליסטי

**פלטת צבעים:**
```
Primary:   #3B82F6 (כחול)
Success:   #10B981 (ירוק)
Warning:   #F59E0B (כתום)
Danger:    #EF4444 (אדום)
Dark BG:   #0F172A (כהה)
```

---

### מיקרו-אינטראקציות

**דוגמאות:**
- 🔴 נקודה פועמת - "זמן אמת"
- 🔄 סיבוב לכפתור רענון
- 📊 התקדמות מילוי בטיים-ליין
- ✨ fade-in של פאנלים
- 🎯 scale-down בלחיצת כפתור

---

### Loading States

**מצבים:**
1. **טעינה ראשונית**
   - Spinner מרכזי
   - טקסט "טוען נתונים..."
   - רקע מטושטש

2. **איתור מיקום**
   - אייקון מסתובב
   - טקסט משוב למשתמש

3. **חיפוש**
   - תוצאות מיידיות
   - אין loader נפרד

---

### הודעות שגיאה

**סוגים:**
1. **שגיאת רשת**
   ```
   "שגיאה בתקשורת עם השרת."
   ```

2. **שגיאת מיקום**
   ```
   "לא ניתן לגשת למיקום."
   ```

3. **שגיאת חיפוש**
   ```
   (שקט - לא נמצאו תוצאות)
   ```

**טיפול:**
- הודעה ברורה למשתמש
- Fallback mechanisms
- Retry options

---

## 📊 סיכום תכונות

### רשימת תכונות מלאה

#### תצוגה ונתונים
✅ מכ"ם גשם בזמן אמת  
✅ תמונות לוויין  
✅ תחזית nowcast  
✅ נתונים היסטוריים  
✅ עדכון אוטומטי  

#### אינטראקציה
✅ חיפוש ערים  
✅ מיקום GPS  
✅ לחיצה על מפה  
✅ זום וגרירה  
✅ ניווט ידני  

#### התאמה אישית
✅ 6 סכמות צבע  
✅ 3 סגנונות מפה  
✅ שקיפות משתנה  
✅ מהירות הפעלה  

#### מידע נוסף
✅ מזג אוויר מקומי  
✅ טמפרטורה  
✅ רוח  
✅ משקעים  
✅ שעון זמן אמת  

#### פלטפורמות
✅ Desktop  
✅ Mobile  
✅ Tablet  
✅ RTL Support  

---

## 🚀 תכונות עתידיות (Roadmap)

### קצר טווח
- [ ] התראות מזג אוויר
- [ ] שמירת מיקומים מועדפים
- [ ] שיתוף מפה ברשתות חברתיות
- [ ] הדפסת מפה

### ארוך טווח
- [ ] גרפים היסטוריים
- [ ] השוואת מיקומים
- [ ] תחזית ל-7 ימים
- [ ] נתוני רוח ברמת פני השטח
- [ ] מפת הצפות פוטנציאלית

